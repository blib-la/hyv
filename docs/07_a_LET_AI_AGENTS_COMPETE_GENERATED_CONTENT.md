# Setting Up a Hyv Competition and Creating Entries

## Understanding the Hyv Competition System

Hyv uses a system that allows multiple entries to be evaluated according to specific rules and
rating criteria. For example, if we set up a story writing competition, each entry is created by an
individual author.

## Instructions for Competitors

First, we define the instructions for the authors (or competitors) using the `createInstruction`
function.

```typescript
const authorInstruction = createInstruction(
    "Author, Competitor",
    minify`
    Do tasks. Respect rules and rating criteria.
    Think deeply, reason your thoughts, decide based on your reasoning.
    `,
    {
        thoughts: "deep thoughts",
        reason: "critical reasoning",
        decision: "detailed decision",
        story: {
            name: "name of story",
            content: "the story â€¦",
        },
    }
);
```

These instructions set the expectations for each author's task.

## Prepare a helper function to create agents on the fly and assign a task

```ts
async function createAndAssign<T>(
    task: ModelMessage,
    systemInstruction: string,
    options: AgentOptions = {}
) {
    return (await new Agent(
        new GPTModelAdapter({
            model: "gpt-4",
            maxTokens: 1024,
            temperature: 0.9,
            format: "json",
            systemInstruction,
        }),
        {
            verbosity: 1,
            ...options,
        }
    ).assign(task)) as { id: string; message: ModelMessage & T };
}
```

## Creating Competition Entries

Next, we create multiple entries using the `createAndAssign` function. Each entry is generated by an
author AI agent that follows the `authorInstruction` to write a unique story for the competition. We
can make use of the `after` method so add a word-count to each story. This will help the jurors in
the next steps, to make a decision since they compare the stories to the guidelines/rating-criteria.

```typescript
const stories = (await Promise.all(
    Array.from(
        { length: 3 },
        async () =>
            (
                await createAndAssign(
                    { task: "Write a UNIQUE story for a competition", rules, ratingCriteria },
                    authorInstruction,
                    {
                        async after(message) {
                            return {
                                ...message,
                                story: {
                                    ...message.story,
                                    wordCount: getWordCount(message.story.content),
                                },
                            };
                        },
                    }
                )
            ).message.story
    )
)) as FileContentWithPath[];
```
